<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        function Hieroglyph(unicodeCode, gardinerCode, gardinerCategory, adjustedGardinerCode, additionalDetails) {
            return {'unicodeCode': unicodeCode, 'gardinerCode': gardinerCode, 'gardinerCategory': gardinerCategory, 'adjustedGardinerCode': adjustedGardinerCode, 'additionalDetails': additionalDetails}
        }

        function Dictionary(gardiner, transliteration, translation, other) {
            return {'gardiner': gardiner, 'transliteration': transliteration, 'translation': translation, 'other': other}
        }

    </script>
    <script src="./dictionary.js"></script>
    <script src="./hieroglyphs.js"></script>
    <script src="./entries.js"></script>
    <style>
        .single {
            float:left;text-align:center;vertical-align: middle;position:relative
        }

        .dualSideOuter {
            float:left;
            text-align:center;
            position:relative;
            margin-top:-15px
        }

        .dualSideTop {
            /*display:block;position:relative*/
        }

        .dualSideBot {
            /*display:block;position:relative;margin-top:-50px*/
        }

        .dualOuter {
            float:left;
            text-align:center;
            position:relative;
            margin-top:-15px
        }

        .dualInnerTop {
            display:block;position:relative
        }

        .dualInnerBot {
            display:block;position:relative;margin-top:-50px
        }

        .tripleOuter {
            float:left;
            text-align:center;
            position:relative;
            margin-top:-15px
        }
        .tripleInnerTop {
            display:block;position:relative;margin-top:-15px
        }
        .tripleInnerMid {
            display:block;position:relative;margin-top:-45px
        }
        .tripleInnerBot {
            display:block;position:relative;margin-top:-50px
        }
    </style>

</head>
<body>
<!--http://unicode.org/wg2/docs/n4818-quadrat-encoding.pdf-->
<!--&#x13000;&#x13430;&#x13250;-->
<!--https://codepen.io/haradabox/pen/jryJdR-->
<!--http://hieroglyphseverywhere.blogspot.com/2016/12/web-browser-test-for-hieroglyphic.html-->
<!--https://github.com/HieroglyphsEverywhere/Fonts/tree/master/Experimental-->
<!--http://www.russellcottrell.com/greek/utilities/SurrogatePairCalculator.htm-->

<!--&#x13102; &#x13432; &#x133CF;-->
<input type="text" id="gardiner" value="D58-M17-N35-X1-G37-D2-Z1-F34-Z1"><button onclick="convert();">Convert</button>
<div id="middleaegyptische" style="font-size:36pt"></div>
<div id="translationaegyptische"></div>
<input type="text" id="lookup" value="viscera"><button onclick="lookup();">Lookup</button><br/>
<div id="lookupageyp" style="font-size:36pt"></div>
<br/><br/>
<div id="testElement"></div>
<!--<span style="font-size:36pt;padding:0">-->
<!--ìÉÄìáãìàñìèèìÖ™ìÅ∑ìè§ìÑ£ìè§-->
<!--</span>-->
<br/>
<div style="font-size:36pt;position:absolute">
    <div class="single">ìÉÄ</div>
    <div class="single">ìáã</div>
    <div class="dualOuter"><span class="dualInnerTop">ìàñ</span><span class="dualInnerBot">ìèè</span></div>
    <div class="single">ìÖ™</div>
    <div class="dualOuter"><span class="dualInnerTop">ìÅ∑</span><span class="dualInnerBot">ìè§</span></div>
    <div class="dualOuter"><span class="dualInnerTop">ìÑ£</span><span class="dualInnerBot">ìè§</span></div>
</div>
<br/><br/><br/>
<div style="font-size:36pt;position:absolute">
    <div class="dualOuter"><span class="dualInnerTop">ìÉõ</span><span class="dualInnerBot">ìèè</span></div>
    <div style="float:left;text-align:center;position:relative;margin-top:-15px"><span style="display:block;position:relative">ìÑØ</span><span style="display:block;position:relative;margin-top:-50px">ìèõ</span></div>
</div>
<br/><br/><br/>
<div id="stacker" style="font-size:36pt;position:absolute"></div>
<script>
    // vertical
    // right to left
    // left to right -- default
    function single(sgl) {
        console.log(sgl);
        return "<div class=\"single\">" + hex2char(hmap[sgl].unicodeCode) + "</div>"
    }

    function dualStacked(dual1, dual2) {
        var d1 = dual1.includes("<") ? dual1 : hex2char(hmap[dual1].unicodeCode);
        var d2 = dual2.includes("<") ? dual2 : hex2char(hmap[dual2].unicodeCode);
        var claz = dual1.includes("<") || dual2.includes("<") ? "" : "class=\"dualOuter\"";
        return "<div" + claz + "><span class=\"dualInnerTop\">" + d1 + "</span><span class=\"dualInnerBot\">" + d2 + "</span></div>"
    }

    function tripleStacked(trip1, trip2, trip3) {
        return "<div class=\"tripleOuter\"><span class=\"tripleInnerTop\">" + hex2char(hmap[trip1].unicodeCode) + "</span><span class=\"tripleInnerMid\">" + hex2char(hmap[trip2].unicodeCode) + "</span><span class=\"tripleInnerBot\">" + hex2char(hmap[trip3].unicodeCode) + "</span></div>"
    }

    function tripleStackedSide(trip1, trip2, trip3) {
        //checks to see if there's html - if there is we're just going to include that.  if there's no html then we just lookup the unicode
        var t1 = trip1.includes("<") ? trip1 : hex2char(hmap[trip1].unicodeCode);
        var t2 = trip2.includes("<") ? trip2 : hex2char(hmap[trip2].unicodeCode);
        var t3 = trip3.includes("<") ? trip3 : hex2char(hmap[trip3].unicodeCode);

        return "<div class=\"tripleOuter\"><span class=\"tripleInnerTop\">" + t1 + "</span><span class=\"tripleInnerMid\">" + t2 + "</span><span class=\"tripleInnerBot\">" + t3 + "</span></div>"
    }

    function dualSide(dual1, dual2) {
        var d1 = dual1.includes("<") ? dual1 : hex2char(hmap[dual1].unicodeCode);
        var d2 = dual2.includes("<") ? dual2 : hex2char(hmap[dual2].unicodeCode);
        var claz = dual1.includes("<") || dual2.includes("<") ? "" : "class=\"dualSideOuter\"";
        return "<div" + claz + "><span class=\"dualSideTop\">" + d1 + "</span><span class=\"dualSideBot\">" + d2 + "</span></div>"
    }

    function dualSideStacked(dual1, dual2) {
        return "<div class=\"\"><span class=\"dualSideTop\">" + hex2char(hmap[dual1].unicodeCode) + "</span><span class=\"dualSideBot\">" + hex2char(hmap[dual2].unicodeCode) + "</span></div>"
    }

    //http://unicode.org/wg2/docs/n4818-quadrat-encoding.pdf
    //http://www.unicode.org/L2/L2016/16018-three-for-egyptian.pdf
    function formattingStackerTest() {
        var html = "";
        var str = "AA1*X1:Y1:Z2";

        //fix these so they continue to flow
        html += dualStacked(dualSide("AA1", "X1"), "Y1");

        //the idea that we can stack a set and include them in one of the sections
        html += tripleStackedSide(dualSideStacked("AA1", "X1"), "Y1", "Z2");
        html += tripleStackedSide("Y1", dualSideStacked("AA1", "X1"), "Z2");
        html += tripleStackedSide("Y1", "Z2", dualSideStacked("AA1", "X1"));

        html += dualStacked(dualSide("AA1", "X1"), "Y1");

        // var wrd = "";
        // var vert = [];
        //
        // var isVert = false;
        // for (let i = 0; i < str.length; i++) {
        //     const it = str[i];
        //     console.log(it);
        //     if (it !== "*" && it !== ":" && it !== "+") {
        //         wrd += it;
        //         if (i === str.length - 1) {
        //             if (isVert) {
        //                 vert.push(wrd);
        //             }
        //             var vlen = vert.length;
        //             if (vlen > 0) {
        //                 if (vlen === 2) {
        //                     html += dualStacked(vert[0], vert[1]);
        //                 } else if (vlen === 3) {
        //                     html += tripleStacked(vert[0], vert[1], vert[2]);
        //                 }
        //             }
        //         }
        //     } else {
        //         if (it === "*") {
        //             html += single(wrd);
        //             vert = []
        //         } else if (it === ":") {
        //             vert.push(wrd);
        //             isVert = true;
        //         } else {
        //             vert = []
        //         }
        //
        //         wrd = "";
        //     }
        // }
        //
        // console.log("yeah baby yeah");

        document.getElementById("stacker").innerHTML = html;
    }

    formattingStackerTest();

    function automatedStackerTest() {
        var html = "";
        html += dualStacked("D36", "X1");
        html += single("O1");
        html += dualStacked("D45", "D21");
        html += dualStacked("X1", "Y1");
        html += "<br/><br/>";
        html += dualStacked("D36", "X1");
        html += single("O1");
        html += single("M30");
        html += tripleStacked("X1", "N33", "N33A");
        html += "<br/><br/>";
        html += single("D36");
        html += single("U28");
        html += dualStacked("G1", "Z7");
        html += single("A24");
        html += "<br/><br/>";
        html += dualStacked("D36", "Q3");
        html += dualStacked("N35", "N35");
        html += single("F27");

        document.getElementById("stacker").innerHTML = html;
    }

    // automatedStackerTest();

    function hex2char ( hex ) {
        // converts a single hex number to a character
        // note that no checking is performed to ensure that this is just a hex number, eg. no spaces etc
        // hex: string, the hex codepoint to be converted
        var result = ''
        var n = parseInt(hex, 16)
        if (n <= 0x10FFFF) {
            result += String.fromCodePoint(n)
        } else {
            //result += 'hex2Char error: Code point out of range: '+ dec2hex(n)
        }

        return result
    }

    function convert() {
        var html = "";
        // var tc = "G1-G1-X1-G1-D40-A14";//document.getElementById("gardiner")
        //"I10-N35-V28-F51-N35-M36-D21-G43-G43-F51";//
        var tc = document.getElementById("gardiner").value;
        var delimiter = "-";
        if (tc.indexOf(" ") !== -1) {
            delimiter = " ";
        }
        var splarr = tc.split(delimiter);
        for (const str of splarr) {
            html += hex2char(hmap[str].unicodeCode);
        }

        var dhtml = dmap[tc];
        if (dhtml !== undefined) {
            document.getElementById("translationaegyptische").innerHTML = JSON.stringify(dhtml);
        }

        document.getElementById("middleaegyptische").innerHTML = html;
    }

    function lookup() {
        var tc = document.getElementById("lookup").value;
        var dhtml = entryMap[tc];
        var html = "";
        if (dhtml !== undefined) {
            var splarr = dhtml.split(",");
            for (const splarrElement of splarr) {
                var hexSplit = splarrElement.split("-");
                for (const str of hexSplit) {
                    html += hex2char(hmap[str].unicodeCode);
                }
                // // html += dmap(splarrElement);
                html += "<br/>";
            }
            document.getElementById("lookupageyp").innerHTML = html;
        }
    }

    convert();

    // test
    // var tmpl = "";
    // tmpl += hex2char("1315C");
    // tmpl += hex2char("13435");
    // tmpl += hex2char("133CF");
    // document.getElementById("testElement").innerHTML = tmpl;
</script>
</body>
</html>
